# =============================================================================
# Face-Based Photo Segregation System - Environment Configuration
# =============================================================================
# Copy this file to .env and customize values as needed

# -----------------------------------------------------------------------------
# Hot Storage (Internal Disk)
# -----------------------------------------------------------------------------
# Root directory for all internal computation, database, state, and staging
# Default: ./hot_storage (relative to backend directory)
HOT_STORAGE_ROOT=./hot_storage

# -----------------------------------------------------------------------------
# Face Recognition Thresholds
# -----------------------------------------------------------------------------
# Euclidean distance thresholds on L2-normalized 512-dim embeddings (range 0-2)
# - 0 = identical faces
# - ~0.8 = high confidence same person
# - ~1.0 = moderate confidence same person
# - >1.0 = likely different person

# STRICT threshold: auto-match + learn new embeddings (high confidence)
THRESHOLD_STRICT=0.80

# LOOSE threshold: match only, no learning (moderate confidence)
THRESHOLD_LOOSE=1.00

# -----------------------------------------------------------------------------
# Embedding Management
# -----------------------------------------------------------------------------
# Maximum embeddings stored per person (FIFO trimming when exceeded)
MAX_EMBEDDINGS_PER_PERSON=30

# -----------------------------------------------------------------------------
# Batch Processing
# -----------------------------------------------------------------------------
# Number of images per atomic batch (crash boundary)
# Larger = fewer checkpoints, smaller = more overhead
ATOMIC_BATCH_SIZE=50

# -----------------------------------------------------------------------------
# Output Compression (Locked Policy)
# -----------------------------------------------------------------------------
# Maximum long edge for output JPEGs
OUTPUT_MAX_LONG_EDGE=2048

# JPEG quality for output images (1-100)
OUTPUT_JPEG_QUALITY=85

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
SERVER_HOST=127.0.0.1
SERVER_PORT=8000

# -----------------------------------------------------------------------------
# CPU Usage / Parallel Processing
# -----------------------------------------------------------------------------
# CPU usage mode: adaptive, low, balanced, high, custom
# - adaptive: Use 67% of available cores (auto-detect)
# - low: 2 workers (~40% CPU on 6-core)
# - balanced: 4 workers (~67% CPU on 6-core) [DEFAULT]
# - high: Use most cores (leaves 1 free)
# - custom: Use MAX_PARALLEL_WORKERS value
CPU_USAGE_MODE=balanced

# Maximum concurrent workers (only used when CPU_USAGE_MODE=custom)
MAX_PARALLEL_WORKERS=4

# Enable/disable parallel processing entirely
ENABLE_PARALLEL_PROCESSING=true
